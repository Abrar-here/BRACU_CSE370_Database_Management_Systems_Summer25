<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>


<!-- templates/add_pet.html --> 
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Add New Pet</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  .drop-zone {
    max-width: 400px;
    height: 200px;
    padding: 20px;
    border: 2px dashed #007bff;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    cursor: pointer;
    color: #555;
    position: relative;
  }
  .drop-zone.dragover {
    background-color: #e9f5ff;
    border-color: #0056b3;
  }
  .drop-zone img {
    max-height: 150px;
    border-radius: 8px;
    margin-top: 10px;
  }
</style>
</head>
<body class="bg-light">
<div class="container py-5">
  <h1 class="mb-4">Add New Pet</h1>
  <form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
      <label>Pet Name</label>
      <input type="text" name="name" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Breed</label>
      <input type="text" name="breed" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Age</label>
      <input type="number" name="age" class="form-control" required>
    </div>
    <div class="mb-3">
      <label>Status</label>
      <select name="status" class="form-select" required>
        <option value="Available">Available</option>
        <option value="Adopted">Adopted</option>
      </select>
    </div>

    <div class="mb-3">
      <label>Pet Image</label>
      <div class="drop-zone" id="drop-zone">
        Drag & drop image here or click to select
        <input type="file" name="image_file" id="image_file" class="form-control" style="display:none;" accept="image/*">
        <img id="preview" src="" alt="Preview" style="display:none;">
      </div>
    </div>

    <button type="submit" class="btn btn-success">Add Pet</button>
    <a href="{{ url_for('pets') }}" class="btn btn-secondary">Cancel</a>
  </form>
</div>

<script>
const dropZone = document.getElementById('drop-zone');
const fileInput = document.getElementById('image_file');
const preview = document.getElementById('preview');

dropZone.addEventListener('click', () => fileInput.click());

dropZone.addEventListener('dragover', e => {
  e.preventDefault();
  dropZone.classList.add('dragover');
});

dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));

dropZone.addEventListener('drop', e => {
  e.preventDefault();
  dropZone.classList.remove('dragover');
  if (e.dataTransfer.files.length) {
    fileInput.files = e.dataTransfer.files;
    showPreview(fileInput.files[0]);
  }
});

fileInput.addEventListener('change', () => {
  if (fileInput.files.length) {
    showPreview(fileInput.files[0]);
  }
});

function showPreview(file) {
  const reader = new FileReader();
  reader.onload = e => {
    preview.src = e.target.result;
    preview.style.display = 'block';
  }
  reader.readAsDataURL(file);
}
</script>
</body>
</html>
